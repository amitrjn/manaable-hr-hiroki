import{a as l,r as m,o as u,j as n,k as c,t as d,m as h,q as f,e as i}from"./vendor-B1AOjT22.js";import{s as x}from"./index-UPCxErIK.js";const p={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},g={class:"sm:mx-auto sm:w-full sm:max-w-md"},w={key:0,class:"mt-4 text-center text-sm text-red-600"},k=l({__name:"CallbackView",setup(_){const a=f(),s=m("");return u(async()=>{try{const o=new URLSearchParams(window.location.search).get("code");if(!o)throw new Error("No code found in callback URL");console.log("Exchanging code for session...");const{data:t,error:r}=await x.auth.exchangeCodeForSession(o);if(r)throw r;if(t!=null&&t.session)console.log("Session obtained successfully"),a.push("/dashboard");else throw new Error("No session obtained after code exchange")}catch(e){console.error("Auth callback error:",e),s.value=e instanceof Error?e.message:"Authentication failed",setTimeout(()=>a.push("/login"),3e3)}}),(e,o)=>(i(),n("div",p,[c("div",g,[o[0]||(o[0]=c("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Processing authentication...",-1)),s.value?(i(),n("p",w,d(s.value),1)):h("",!0)])]))}});export{k as default};
